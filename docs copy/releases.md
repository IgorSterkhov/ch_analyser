# Релизы

## v0.4 (февраль 2026)

### Query History — улучшенные фильтры
- Фильтры User и Kind разнесены в отдельные строки
- User-кнопки отображаются плиткой с автопереносом (удобно при большом количестве пользователей)
- Кнопка сброса (иконка корзины) у каждого фильтра
- Переключатель **Direct** — фильтрация только прямых запросов к таблице (по тексту запроса). По умолчанию включён. При выключении добавляется колонка «Direct»
- Кнопка просмотра SQL `</>` перенесена в строку управляющих элементов

### Ленивая загрузка вкладок
- Вкладки Query History и Flow загружаются только при первом переключении на них

### Исправление подсчёта Refs
- Refs теперь считает только случаи, когда таблица является **источником** данных для другой сущности
- MV, которые пишут В таблицу (TO table), больше не увеличивают счётчик Refs

### Прочие исправления
- Прогресс-бар диска: исправлено отображение длинных дробных чисел

---

## v0.3 (февраль 2026)

### Вкладка Flow — визуализация потоков данных
- Новая вкладка **Flow** в панели деталей таблицы
- **MV Flow** — цепочка материализованных представлений (по DDL из `system.tables`)
- **Query Flow** — потоки переливки по истории запросов (`system.query_log`)
- **Full Flow** — объединённая диаграмма
- Диаграммы Mermaid: таблицы = прямоугольники, MV = параллелограммы, текущая таблица выделена синим
- Масштабирование диаграмм кнопками `+` / `-`, масштаб сохраняется в сессии

### Правая панель Table Details — выдвижной drawer
- Панель деталей таблицы переделана в выдвижную правую панель (overlay)
- Открывается/закрывается кликом по строке таблицы или стрелкой у правого края
- Закрывается по `X`, по клику вне панели, повторному клику по той же строке
- Изменение ширины перетаскиванием за левый край, ширина сохраняется в сессии

### Серверная фильтрация истории запросов
- Фильтры User и Kind теперь работают на стороне сервера (GROUP BY)
- Кросс-фильтрация: при выборе пользователя недоступные типы запросов блокируются
- Выбор лимита вывода: 50, 100, 200, 500, 1000
- Кнопка Refresh для обновления данных

### SQL-форматирование
- Новый модуль `sql_format.py` — форматирование SQL с сохранением ClickHouse camelCase-функций
- Корректное сохранение регистра для системных колонок (type, user, table и др.)

### Кнопка Copy — поддержка HTTP
- Копирование в буфер обмена теперь работает на удалённых серверах без HTTPS (fallback через textarea)

### Прочее
- Колонка **TTL** в таблице таблиц
- Колонка **R** (репликация) и **Refs** (ссылки) в таблице таблиц
- Просмотр списка ссылающихся объектов (MV, словари) по клику на Refs
- Ссылки на уровне колонок во вкладке Columns
- Процент заполнения диска округляется до 1 знака после запятой
- Встроенная документация (кнопка `?` в шапке)

---

## v0.2 (февраль 2026)

### Серверная панель
- Информация о дисках сервера: использованное / общее пространство, прогресс-бар

### Фильтрация истории запросов
- Кнопки-переключатели User и Kind
- Текстовый фильтр по содержимому

### Просмотр SQL
- Форматированный вывод SQL-запроса с подсветкой имени таблицы
- Кнопка `</>` для просмотра сгенерированных запросов

### Боковая панель подключений
- Сворачиваемая левая панель со стрелкой-переключателем
- Автоскрытие после подключения
