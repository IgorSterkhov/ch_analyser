# Руководство пользователя

## Обзор интерфейса

Веб-интерфейс состоит из трёх основных зон:

```
+----------------------------------------------------------+
| Header: название, кнопка помощи, пользователь, выход     |
+-------------+--------------------------------------------+
|             | Информация о сервере: диск, использование   |
| Подключения +---------------------+----------------------+
| (боковая    | Таблицы             | Детали таблицы       |
|  панель)    | список с размерами  | Колонки / История    |
|             | и датами запросов   | запросов             |
+-------------+---------------------+----------------------+
```

## Авторизация

При первом входе откроется страница логина. Введите имя пользователя и пароль, назначенные администратором. Доступны две роли:

- **admin** - полный доступ: просмотр данных, управление подключениями
- **user** - только просмотр данных по существующим подключениям

## Подключение к серверу

1. Откройте боковую панель «Подключения» (кнопка-меню в шапке или стрелка слева)
2. Нажмите на карточку нужного подключения
3. При успешном подключении карточка подсветится, появится надпись «Connected»
4. Автоматически загрузится информация о сервере и список таблиц

Боковая панель автоматически скрывается после подключения. Чтобы открыть снова - нажмите стрелку у левого края экрана.

## Информация о сервере

После подключения в верхней части отображается:

- Имя подключения
- Для каждого диска: использованное / общее пространство, процент заполнения
- Цветовая индикация: зелёный (< 70%), жёлтый (70-90%), красный (> 90%)

## Просмотр таблиц

Центральная панель показывает все таблицы сервера (кроме системных баз данных). Для каждой таблицы отображается:

| Колонка | Описание |
|---------|----------|
| Table | Полное имя таблицы (база.таблица) |
| Size | Размер данных на диске |
| Last SELECT | Время последнего SELECT-запроса |
| Last INSERT | Время последней вставки данных |

### Сортировка

Нажмите на заголовок колонки для сортировки. По умолчанию таблицы отсортированы по размеру (убывание).

### Пагинация

Внизу таблицы можно выбрать количество строк на странице: 20, 50, 100, 200 или «All».

### Обновление

Кнопка «Refresh» под таблицей обновляет данные с сервера.

## Анализ колонок

Нажмите на строку таблицы - справа откроется панель деталей с двумя вкладками. Вкладка **Columns** показывает:

| Колонка | Описание |
|---------|----------|
| Column | Имя колонки |
| Type | Тип данных ClickHouse (String, UInt64, DateTime и т.д.) |
| Codec | Кодек сжатия (LZ4, ZSTD и т.д.) |
| Size | Размер колонки на диске |

Таблица сортируется по размеру - сразу видно, какие колонки занимают больше всего места.

## История запросов

Вкладка **Query History** показывает последние 200 запросов к выбранной таблице из `system.query_log`.

### Фильтрация

Над таблицей расположены инструменты фильтрации:

- **Текстовый фильтр** - поиск по любому полю (время, пользователь, текст запроса)
- **Фильтры User** - кнопки для каждого пользователя. Нажатая (синяя) - показывать, отжатая (серая) - скрыть
- **Фильтры Kind** - аналогично по типу запроса (Select, Insert и т.д.)

По умолчанию все фильтры активны. Нажмите на кнопку пользователя или типа, чтобы скрыть соответствующие строки.

### Просмотр полного запроса

Нажмите иконку глаза слева от текста запроса. Откроется диалог с:

- Отформатированным SQL-запросом (ключевые слова UPPERCASE, ClickHouse-функции в camelCase)
- Подсветкой имени текущей таблицы (жёлтый маркер)
- Переключателем «Highlight table» для включения/выключения подсветки
- Кнопкой закрытия

### Просмотр сгенерированного запроса

Кнопка `</>` над таблицей показывает SQL-запрос, которым приложение получает историю из `system.query_log`. Этот запрос можно скопировать и выполнить в ClickHouse-клиенте.

## Помощь

Кнопка `?` в правой части шапки открывает встроенную документацию. Доступны разделы:

- Руководство пользователя (эта страница)
- [Руководство администратора](admin-guide.md) - если вам нужно настроить подключения или управлять пользователями
